CREATE TYPE "currencies" AS ENUM (
  'USD',
  'EUR',
  'BRL'
);

CREATE TYPE "car_types" AS ENUM (
  'Novo',
  'Clássico'
);

CREATE TYPE "traction_types" AS ENUM (
  'Traseira',
  'Dianteira',
  '4x4'
);

CREATE TYPE "car_categories" AS ENUM (
  'Esportivo',
  'SUV',
  'Clássico',
  'Pick-up',
  'Elétrico'
);

CREATE TYPE "colors" AS ENUM (
  'Vermelho',
  'Branco',
  'Preto',
  'Azul',
  'Verde',
  'Amarelo'
);

CREATE TYPE "shift_types" AS ENUM (
  'Automático',
  'Manual',
  'Semi-Automático'
);

CREATE TYPE "propulsion_types" AS ENUM (
  'Gasolina',
  'Diesel',
  'Híbrida',
  'Elétrico'
);

CREATE TYPE "countries" AS ENUM (
  'BR',
  'IT',
  'US',
  'DE',
  'FR'
);

CREATE TYPE "car_configs" AS ENUM (
  'Coupé',
  'Sedan',
  'Hatchback'
);

CREATE TABLE "cars" (
  "id" uuid PRIMARY KEY DEFAULT (gen_random_uuid()),
  "price" decimal(12,2) NOT NULL,
  "currency" currencies NOT NULL,
  "model" varchar(255) NOT NULL,
  "year" int NOT NULL,
  "car_type" car_types NOT NULL,
  "mileage" decimal(8,2),
  "brand" uuid NOT NULL,
  "store" uuid NOT NULL,
  "worldwide_quantity" int,
  "national_quantity" int,
  "color" colors NOT NULL,
  "horse_power" int NOT NULL,
  "category" car_categories NOT NULL,
  "doors" int NOT NULL,
  "traction" traction_types NOT NULL,
  "car_configuration" car_configs NOT NULL,
  "shift" shift_types NOT NULL,
  "acceleration_to_hundred" decimal(10,2),
  "torque" varchar(100),
  "motorization" varchar(100),
  "propulsion" propulsion_types NOT NULL,
  "is_available" boolean DEFAULT true,
  "default_picture" varchar(255),
  "last_updated" timestamp DEFAULT (now())
);

CREATE TABLE "brands" (
  "id" uuid PRIMARY KEY DEFAULT (gen_random_uuid()),
  "name" varchar(100) NOT NULL,
  "description" varchar(255),
  "country_origin" countries NOT NULL,
  "logo" varchar(255),
  "last_updated" timestamp DEFAULT (now())
);

CREATE TABLE "stores" (
  "id" uuid PRIMARY KEY DEFAULT (gen_random_uuid()),
  "name" varchar(255) NOT NULL,
  "address" uuid,
  "cnpj" varchar(14) UNIQUE NOT NULL,
  "email" varchar(150) UNIQUE NOT NULL,
  "phone_number" varchar(11),
  "website" varchar(255),
  "description" varchar(255),
  "owner" uuid NOT NULL,
  "is_active" boolean NOT NULL,
  "last_updated" timestamp DEFAULT (now())
);

CREATE TABLE "car_images" (
  "car" uuid,
  "id" INT GENERATED BY DEFAULT AS IDENTITY,
  "image" varchar(255) NOT NULL,
  PRIMARY KEY ("car", "id")
);

ALTER TABLE "cars" ADD FOREIGN KEY ("brand") REFERENCES "brands" ("id");

ALTER TABLE "cars" ADD FOREIGN KEY ("store") REFERENCES "stores" ("id");

ALTER TABLE "car_images" ADD FOREIGN KEY ("car") REFERENCES "cars" ("id");